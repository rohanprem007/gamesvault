{% extends "dashboard_base.html" %}

{% block dashboard_content %}
<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="text-white brand-font">MY LIBRARY <span class="text-secondary">({{ library_items|length }})</span></h2>
    <a href="/" class="btn btn-theme btn-sm">BROWSE STORE</a>
</div>

<div class="row g-4">
    {% for item in library_items %}
    <div class="col-md-4 col-6">
        <div class="card bg-dark border-secondary h-100 rounded-0">
            <div class="position-relative">
                <img src="{{ item.game.image.url }}" class="card-img-top rounded-0" alt="{{ item.game.title }}" style="height: 180px; object-fit: cover;">
                <div class="position-absolute top-0 end-0 p-2">
                    <span class="badge bg-success rounded-0">OWNED</span>
                </div>
            </div>
            <div class="card-body">
                <h6 class="text-white mb-1 text-truncate">{{ item.game.title }}</h6>
                <small class="text-muted">Purchased: {{ item.purchase_date|date:"M d, Y" }}</small>
                <button class="btn btn-theme w-100 mt-3 btn-sm"><i class="fas fa-play me-2"></i> INSTALL</button>
            </div>
        </div>
    </div>
    {% empty %}
    <div class="col-12 text-center py-5">
        <h4 class="text-muted">Your library is empty.</h4>
        <p class="text-muted mb-4">Time to start your collection!</p>
        <a href="/" class="btn btn-outline-light rounded-0">GO TO STORE</a>
    </div>
    {% endfor %}
</div>
{% endblock %}